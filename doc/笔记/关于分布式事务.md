
## 分布式事务的产生的原因

1、数据库分库分表
当数据库单表一年产生的数据超过1000W，那么就要考虑分库分表，
具体分库分表的原理在此不做解释，以后有空详细说，简单的说就
是原来的一个数据库变成了多个数据库。这时候，如果一个操作既
访问01库，又访问02库，而且要保证数据的一致性，那么就要用到
分布式事务。

2、业务的服务化
比如原来单机支撑了整个电商网站，现在对整个网站进行拆解，分
离出了订单中心、用户中心、库存中心。对于订单中心，有专门
的数据库存储订单信息，用户中心也有专门的数据库存储用户信息，
库存中心也会有专门的数据库存储库存信息。这时候如果要同时对
订单和库存进行操作，那么就会涉及到订单数据库和库存数据库，
为了保证数据一致性，就需要用到分布式事务。

以上两种情况表象不同，但是本质相同，都是因为要操作的数据库变多了！

## 分布式事务的应用场景

1、支付
最经典的场景就是支付了，一笔支付，是对买家账户进行扣款，同时对
卖家账户进行加钱，这些操作必须在一个事务里执行，要么全部成功，
要么全部失败。 而对于买家账户属于买家中心，对应的是买家数据库，
而卖家账户属于卖家中心，对应的是卖家数据库，对不同数据库的操作
必然需要引入分布式事务。

2、在线下单
买家在电商平台下单，往往会涉及到两个动作，一个是扣库存，第二个
是更新订单状态，库存和订单一般属于不同的数据库，需要使用分布式
事务保证数据一致性。